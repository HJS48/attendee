# ConfigMap for non-sensitive environment variables
# NOTE: POSTGRES_HOST and REDIS_URL use host IP - requires Docker services
# to be exposed on host network (configured in Phase 2)
apiVersion: v1
kind: ConfigMap
metadata:
  name: env
  namespace: attendee
  labels:
    app.kubernetes.io/name: attendee
data:
  # Django settings
  DJANGO_SETTINGS_MODULE: "attendee.settings.production"

  # Database - Docker Postgres accessible via host network (Phase 2)
  POSTGRES_HOST: "84.247.128.112"
  POSTGRES_DB: "attendee_development"
  POSTGRES_USER: "attendee_development_user"

  # Redis - Docker Redis accessible via host network (Phase 2)
  REDIS_URL: "redis://84.247.128.112:6379/5"

  # Kubernetes mode settings
  LAUNCH_BOT_METHOD: "kubernetes"
  TASK_EXECUTION_MODE: "kubernetes"
  CUBER_RELEASE_VERSION: "latest"
  BOT_POD_IMAGE: "ghcr.io/hjs48/attendee"
  BOT_POD_NAMESPACE: "attendee"
  WEBPAGE_STREAMER_POD_NAMESPACE: "attendee-webpage-streamer"
  BOT_POD_CONFIG_MAP_NAME: "env"
  BOT_POD_SECRETS_NAME: "app-secrets"
  BOT_POD_SERVICE_ACCOUNT_NAME: "attendee-bot-creator"

  # Bot resource limits (reduced for single-node setup)
  BOT_CPU_REQUEST: "1500m"
  BOT_MEMORY_REQUEST: "2Gi"
  BOT_MEMORY_LIMIT: "3Gi"
  BOT_EPHEMERAL_STORAGE_REQUEST: "5Gi"

  # Chrome settings
  ENABLE_CHROME_SANDBOX: "false"

  # Image settings - using public registry, no pull secret needed
  DISABLE_BOT_POD_IMAGE_PULL_SECRET: "true"

  # Rate limiting (disabled for self-hosted)
  DISABLE_RATE_LIMITING: "true"
  USER_THROTTLE_RATE: "100000/hour"
  ANON_THROTTLE_RATE: "100000/hour"
